@(teams: List[EditorialSupportTeam], fronts: List[FrontsEditor])

@renderTeam(teamName: String, members: List[TeamMember]) = {
    <ul class="support-list">
    @for(staff <- members) {
        <form class="support-list-form" method="POST">
            <li class="support-list-item">
                <input type="hidden" name="category" value="team_member">
                <input type="hidden" name="team" value="@staff.team">
                <input type="hidden" name="name" value="@staff.name">
                <p class="support-staff-label support-staff-row"><b>@staff.name</b></p>

                <div class="support-staff-row">
                    <label class="support-staff-label">Active?</label>
                    @if(staff.active) {
                        <input name="active" type="checkbox" checked onchange="this.form.submit()" />
                    } else {
                        <input name="active" type="checkbox" onchange="this.form.submit()" />
                    }
                </div>

                <div class="support-staff-row">
                    <label class="support-staff-label">Description</label>
                    <input name="description" type="text" value="@staff.description" onchange="this.form.submit()" />
                </div>
            </li>
        </form>
    }
    </ul>
}

@renderFronts(fronts: List[FrontsEditor]) = {
    <ul class="support-list">
    @for(front <- fronts) {
        <form class="support-list-form" method="POST">
            <li class="support-list-item">
                <input type="hidden" name="category" value="fronts_editor">
                <input type="hidden" name="team" value="@front.front">
                <p class="support-staff-label support-staff-row"><b>@front.front</b></p>

                <div class="support-staff-row">
                    <label class="support-staff-label">Description</label>
                    <input name="name" type="text" value="@front.name" onchange="this.form.submit()" />
                </div>
            </li>
        </form>
    }
    </ul>
}

@renderAddTeamMember(teamName: String) = {
    <form method="POST">
        <div class="support-admin-label">
            <status>Add new team member</status>
            <input type="hidden" name="category" value="team_member" />
            <input type="hidden" name="team" value="@teamName" />
            <input type="text" class="support-admin-text-input" name="name">
            <div class="support-admin-button-container">
                <input type="submit" class="btn btn-sm btn-info" value="add" />
            </div>
        </div>
    </form>
}

@layout("Support") {
    <div class="admin">

        <div class="starter-template">
            @*<p class="lead">*@
            <p>Note: this will display on all Composer documents. Don't forget to untick yourself so that colleagues aren't trying to contact an empty chair.</p>
        </div>

        <div>
            <div class="col-lg-12">
                @for(team <- teams) {
                    <h2>@team.name team</h2>
                    <div class="support-list-wrapper">
                        @renderTeam(team.name, team.staff)
                        <h3>Admin</h3>
                        @renderAddTeamMember(team.name)
                    </div>
                }
                <h2>Fronts team</h2>
                <div class="support-list-wrapper">
                    @renderFronts(fronts)
                </div>
            </div>
        </div>
    </div>

    <script src="@routes.Assets.versioned("build/editorialsupportteams.bundle.js")"></script>
}

