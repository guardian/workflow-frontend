@(teams: List[model.SupportTeam])

@layout("Support") {
    <div class="admin">

        <div class="starter-template">
            <h1>Audience // Fronts team status</h1>
            <p class="lead">
                Note: this will display at the top of any Composer document. Don't forget to untick yourself so that colleagues aren't trying to contact an empty chair.
            </p>
        </div>

        <div>
            <div class="col-lg-3">
                @for(team <- teams) {
                    <h2>@team.name team</h2>
                    @for(staff <- team.staff){
                        <li><input type="checkbox" @if(staff.active){checked} val><label>@staff.name</label></li>
                    }
                        <li><input type="text" id="name-entry-@team.name"><button class="btn btn-lrg btn-info" onclick="addNewStaff('@team.name')">add</button></li>
                }
            </div>
        </div>
    </div>

    <link rel="stylesheet" type="text/css" href="@routes.Assets.versioned("layouts/infopages/info.min.css")"/>

    <script>
            function addNewStaff(team) {
                var xhr = new XMLHttpRequest();
                var name = document.getElementById("name-entry-".concat(team)).value;
                var endpoint = "/api/supportTeams/".concat(team).concat("/").concat(name)
                xhr.open('PUT', endpoint, true);
                xhr.send();
                xhr.onreadystatechange = function() {
                    if (xhr.readyState == 4 && xhr.status == 200) {
                        document.reload();
                    }
                }
            }
    </script>
}

