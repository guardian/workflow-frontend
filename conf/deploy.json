{
    "defaultStacks": ["workflow"],
    "packages": {
        "workflow-frontend": {
            "type": "autoscaling",
            "data": {
                "port": 9000,
                "bucket": "workflow-dist",
                "publicReadAcl": false
            }
        },
        "workflow-frontend-ami-update": {
            "type": "ami-cloudformation-parameter",
            "data": {
                "amiTags" : {
                    "ImageName": "ubuntu-trusty-java8",
                    "BuildName": "tools-machine-images",
                    "Branch": "master"
                },
                "amiParameter": "AMI",
                "cloudFormationStackName": "Workflow-Frontend",
                "prependStackToCloudFormationStackName" : false,
                "appendStageToCloudFormationStackName" : true
            }
        }
    },
    "recipes": {
        "default": {
            "depends": ["uploadArtifacts", "deploy"]
        },
        "deploy": {
            "actionsBeforeApp": ["workflow-frontend.deploy"]
        },
        "uploadArtifacts": {
            "actionsBeforeApp": ["workflow-frontend.uploadArtifacts"]
        },
        "ami-update": {
            "actions": ["workflow-frontend-ami-update.update"]
        },
        "ami-update-and-deploy": {
            "actions": [
                "workflow-frontend-ami-update.update",
                "workflow-frontend.deploy"
            ]
        }
    }
}
