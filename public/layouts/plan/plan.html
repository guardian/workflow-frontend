<div class="plan-container" ng-class="{ 'loaded': isLoaded }">

    <div class="date-list">
        <ul class="date-list__list list-unstyled">
            <li class="date-list__date" ng-class="{'date-list__date--selected': date.date.isSame(selectedDate, 'day')}" ng-repeat="date in dateList track by date.date"
                ng-controller="wfDateListController" ng-click="selectDay(date.date)">
                <span class="date-list__date-title">{{ date.date | dateListFormatter }}</span>
                <span class="date-list__date-items-indicator" ng-class="{'date-list__date-items-indicator--faded': items.length === 0}"> - {{ items.length }} {{ items.length === 1 ? "item" : "items" }}</span>
                <span class="date-list__date-date">({{ date.date.format('DD/MM/YY') }})</span>

                <ul ng-if="newsList">
                    <li ng-repeat="dayNote in date.dayNotes">
                        <wf-editable class="date-list__date-note" ng-model="dayNote.note" wf-editable-on-update="updateDayNote(dayNote.id, newValue, date.date)" wf-editable-required="true">
                            {{ dayNote.note}}
                        </wf-editable>
                    </li>
                </ul>

                <wf-editable class="date-list__date-note" ng-if="newsList" ng-model="newNote" wf-editable-on-update="updateDayNote(0, newValue, date)" wf-editable-on-cancel="newNote=null" wf-no-close-mode="true">
                    {{ "Add note..." }}
                </wf-editable>
                <!--<ul class="day-events list-unstyled" ng-if="items.length">-->
                    <!--<li class="day-event" ng-repeat="item in items">-->
                        <!--<span class="day-event__title">{{item.title}}</span>-->
                    <!--</li>-->
                <!--</ul>-->
            </li>
        </ul>
    </div>

    <div class="plan__view-container">

        <div class="plan__title-bar">

            <h1 class="plan__title">{{ selectedDate.format('dddd Do MMMM YYYY') }}</h1>

            <wf-quick-add on-add-hook="quickAddHook" pre-selected-date="selectedDate"></wf-quick-add>

            <ul class="plan__tabs list-unstyled">
                <li class="plan__tab" ng-click="byBundle = false;" ng-class="{'plan__tab--active': !byBundle}">By time</li>
                <li class="plan__tab" ng-click="byBundle = true;" ng-class="{'plan__tab--active': byBundle}">By bundle</li>
            </ul>

        </div>

        <wf-day-view class="day-view" plan-items="dayItems" selected-date="selectedDate" ng-show="!byBundle"></wf-day-view>

        <wf-bundle-view class="bundle-view" bundle-items="dayItemsByBundle" selected-date="selectedDate" ng-show="byBundle"></wf-bundle-view>

    </div>

</div>
